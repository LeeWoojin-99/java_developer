package Bank;

import java.io.BufferedReader;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;

public class Management {
	ArrayList<Account> list = new ArrayList<>();
	
	public void printMenu() {
		System.out.println("- - - MENU - - -");
		System.out.println("1. 계좌 등록");
		System.out.println("2. 계좌 입금");
		System.out.println("3. 계좌 출금");
		System.out.println("4. 계좌 목록 확인");
		System.out.println("종료하시려면 q를 입력해주세요");
		System.out.println("- - - - - - - - -");
		System.out.print("입력 > ");
	}

	public void createAccount(BufferedReader br) throws IOException {
		String name;
		long balance;
		
		System.out.print("소유주 이름 입력 > ");
		name = br.readLine();
		System.out.print("초기 잔고 입력 > ");
		balance = Long.parseLong(br.readLine());
		
		list.add(new Account(name, balance));
	}
	
	public int selectAccount(BufferedReader br) throws NumberFormatException, IOException {
		System.out.println(" 계좌번호 입력 > ");
		int accountNumber = Integer.parseInt(br.readLine());
		accountNumber -= 1;
		
		if(0 > accountNumber && accountNumber < list.size()-1) {
			System.out.println("없는 계좌 번호입니다.");
			return -1;
		}else {
			return accountNumber; 
		}
	}
	
	public void withdraw(BufferedReader br) throws NumberFormatException, IOException { // 출금
		System.out.print("출금하려는");
		int accountNumber = selectAccount(br);
		if(accountNumber == -1) return;
		
		long balance = list.get(accountNumber).getBalance();
		System.out.print("출금 금액 입력 > ");
		long money = Long.parseLong(br.readLine());
		if(balance < money) {
			System.out.println("잔고 부족");
		}else {
			list.get(accountNumber).setBalance(balance-money);
		}
		System.out.println("잔고 : "+list.get(accountNumber).getBalance());
	}
	
	public void deposit(BufferedReader br) throws NumberFormatException, IOException { // 입금
		System.out.print("입금하려는");
		int accountNumber = selectAccount(br);
		if(accountNumber == -1) return;
		
		long balance = list.get(accountNumber).getBalance();
		System.out.print("입금 금액 입력 > ");
		long money = Long.parseLong(br.readLine());
		list.get(accountNumber).setBalance(balance+money);
		System.out.println("잔고 : "+list.get(accountNumber).getBalance());
	}

	public void printAccountList() {
		for(int i=1; i<list.size()+1; i++) {
			System.out.println("Bank-"+String.format(new DecimalFormat("0000").format(i)));
		}
	}
}
