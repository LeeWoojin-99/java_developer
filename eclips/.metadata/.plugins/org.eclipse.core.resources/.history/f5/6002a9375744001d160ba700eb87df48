package Day1005;

import java.io.BufferedReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class LWJ {
	private static final boolean String = false;

	public static void main(String[] args) throws IOException {
		
		HashMap<String, ArrayList<String>> map = new HashMap<>();
		
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); // 입력
		FileWriter fw = new FileWriter("word.txt"); // 쓰기
		
		String input;
		loop:
		do {
			printMenu();
			
			map.put("run1", new ArrayList<String>(List.of("뛰다11", "뛰다12", "뛰다13"))); // TEST
			map.put("run2", new ArrayList<String>(List.of("뛰다21", "뛰다22", "뛰다23"))); // TEST
			map.put("run3", new ArrayList<String>(List.of("뛰다31", "뛰다32", "뛰다33"))); // TEST
			
			input = br.readLine();
			switch(input) {
			case "1": map = addWord(br, map); break;
			case "2": saveFile(fw, map); break;
			case "3": System.out.println("종료"); break loop;
			default: System.out.println("잘못된 입력입니다. 다시 입력해주세요."); break;
			}
		}while(input != "3");
		
		fw.close();
	}
	
	static void saveFile(FileWriter fw, HashMap<String, ArrayList<String>> map) throws IOException {
		// 맵에 있는 걸 String으로 바꿔서 fw의 write method 이용하기
		StringBuffer sb = new StringBuffer();
		for(String i: map.keySet()) {
			sb.append(i+"\n");
			for(String j: map.get(i)) {
				sb.append(j+"\n");
			}
			sb.append("- - -\n");
		}
		System.out.print(sb.toString());
		fw.write(sb.toString());
	}

	static void printMenu() {
		System.out.println(". . . MENU . . .");
		System.out.println("1. 단어 등록");
		System.out.println("2. 파일 저장");
		System.out.println("3. 종료");
		System.out.print("입력 > ");
	}

	static HashMap<String, ArrayList<String>> addWord(BufferedReader br, HashMap<String, ArrayList<String>> map) throws IOException {
		String word;
		ArrayList<String> list = new ArrayList<>();
		String input;
		System.out.print("단어를 입력해주세요 > ");
		word = br.readLine();
		
		while(true) {
			System.out.println("단어의 의미를 입력하시겠습니까? (y/n) > ");
			input = br.readLine();
			if(input.equals("y")) {
				System.out.println("단어의 의미를 입력해주세요");
				list.add(br.readLine());
			}else if(input.equals("n")) {
				System.out.println("단어의 의미 입력을 종료합니다.");
				break;
			}else {
				System.out.println("잘못된 입력입니다. 다시 입력해주세요.");
			}
		}
		
		map.put(word, list);
		System.out.println(word);
		System.out.println(list);
		return map;
			
	}
	
	
}
